" global
set nocompatible
filetype plugin on
syntax enable
set incsearch ic wildmenu smartcase hidden
set backspace=indent,eol,start
set cursorline laststatus=2
set nobackup noswapfile nowrap
set wildoptions=pum,fuzzy
set smartindent expandtab tabstop=4 shiftwidth=4 scrolloff=15
set viminfo='100,<50,s10,h
" maps
nmap <silent> <c-l> :wincmd l<CR>
nmap <silent> <c-h> :wincmd h<CR>
nmap <silent> <c-j> :wincmd j<CR>
nmap <silent> <c-k> :wincmd k<CR>
inoremap <C-h> <Left>
inoremap <C-l> <Right>
inoremap <C-k> <Up>
inoremap <C-j> <Down>
noremap <silent> <C-n> :set nu!<CR>
nnoremap ;w :up<CR>
nnoremap ;q :hide<CR>
nnoremap ;s :ls<CR>:
nnoremap ;e :e<Space>
nnoremap ;; :
nnoremap <silent> ;n :NERDTreeToggle<CR> :wincmd =<CR>
inoremap <C-c> <Esc>
vnoremap <C-c> <Esc>
nnoremap q: <nop>
nnoremap Q <nop>
inoremap kj <Esc>
nnoremap n nzzzv
nnoremap N Nzzzv
cabbrev lcd lcd %:p:h
cabbrev !p !tmux split -p25; tmux send-keys -t 2 python3\ % Enter
cabbrev !b !tmux split -p25; tmux send-keys -t 2 bash\ % Enter
cabbrev !c !tmux split -p25; tmux send-keys -t 2 cc\ % Enter
" braces
inoremap ( ()<Esc>i
inoremap { {<CR>}<Esc>ko
inoremap [ []<Esc>i
inoremap /* /*  */<Esc>hhi
" NERDTree
let NERDTreeWinSize=20
let NERDTreeMinimalUI=1
let NERDTreeMinimalMenu=1
let NERDTreeQuitOnOpen=1
let NERDTreeAutoDeleteBuffer=1
let NERDTreeWinSizeMax=50
" VIMWIKI config
let g:vimwiki_list = [{'path': '/notes/wiki', 'syntax': 'markdown', 'ext': 'md'}]
let g:vimwiki_markdown_link_ext = 0
let g:vimwiki_global_ext=1
" COLORSCHEME
set termguicolors
set background=dark
colorscheme everforest
let g:everforest_background = 'medium'
let g:everforest_better_performance = 1
" SuperTab
let g:SuperTabDefaultCompletionType = "context"
let g:SuperTabCompletionContexts = ['s:ContextText', 's:ContextDiscover']
"select file w/ lf
function! LF()
    let temp = tempname()
    exec 'silent !lf -selection-path=' . shellescape(temp)
    if !filereadable(temp)
        redraw!
        return
    endif
    let names = readfile(temp)
    if empty(names)
        redraw!
        return
    endif
    exec 'edit ' . fnameescape(names[0])
    for name in names[1:]
        exec 'argadd ' . fnameescape(name)
    endfor
    redraw!
endfunction
command! -bar LF call LF()
" statusline
augroup StatuslineMode
  autocmd!
  autocmd ModeChanged *:* call s:UpdateStatuslineColor()
augroup END
function! s:UpdateStatuslineColor()
  let m = mode()
  if m =~# '^i'
    hi statusline guibg=#A7C080 ctermfg=6 guifg=Black ctermbg=0
  elseif m =~# '^R'
    hi statusline guibg=#E67E80 ctermfg=5 guifg=Black ctermbg=0
  elseif m =~# '^v'
    hi statusline guibg=#E67E80 ctermfg=15 guifg=Black ctermbg=5
  elseif m =~# '^V'
    hi statusline guibg=#E67E80 ctermfg=15 guifg=Black ctermbg=5
  elseif m =~# "\<C-v>"
    hi statusline guibg=#D699B6 ctermfg=15 guifg=Black ctermbg=5
  else
    hi statusline guibg=#5C6A72 ctermfg=8 guifg=#D3C6AA ctermbg=15
  endif
endfunction
hi statusline guibg=#5C6A72 ctermfg=8 guifg=#D3C6AA ctermbg=15
" Formats the statusline
set statusline=%f       " file name
set statusline+=%h      "help file flag
set statusline+=%m      "modified flag
set statusline+=%r      "read only flag
set statusline+=\ [%{getcwd()}]
set statusline+=\ %=    " align left
set statusline+=%y\     " filetype
set statusline+=%l/%L   " line X of Y 
set statusline+=\ b:%n  " Buffer number
